"use strict";(self.webpackChunklibrary_management_system=self.webpackChunklibrary_management_system||[]).push([[645],{8645:(U,d,a)=>{a.r(d),a.d(d,{CategoryEditModule:()=>l});var y=a(6895),c=a(9299),n=a(4006),t=a(4650),h=a(2507),N=a(2882),f=a(7009),u=a(9549),p=a(4144),C=a(4859);const v=["formGroupDirective"];function x(o,r){if(1&o&&(t.TgZ(0,"div",4)(1,"strong"),t._uU(2,"Error: "),t.qZA(),t._uU(3),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.AsE("",null==e.error.error?null:e.error.error.error," ",null==e.error.error?null:e.error.error.message,"")}}function Z(o,r){1&o&&(t.TgZ(0,"mat-error",17),t._uU(1,"category name is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function b(o,r){if(1&o&&(t.TgZ(0,"mat-error",17),t._uU(1,"category name is "),t.TgZ(2,"strong"),t._uU(3),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(3),t.hij(" at least of ",null==e.getCategoryName||null==e.getCategoryName.errors?null:e.getCategoryName.errors.minlength.requiredLength," chars ")}}function _(o,r){1&o&&(t.TgZ(0,"mat-error",17),t._uU(1," short name is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function T(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",0)(1,"div",5)(2,"form",6,7),t.NdJ("ngSubmit",function(){t.CHM(e);const g=t.oxw();return t.KtG(g.updateCategory())}),t.TgZ(4,"mat-form-field",8)(5,"mat-label"),t._uU(6,"Category Id"),t.qZA(),t._UZ(7,"input",9),t.qZA(),t.TgZ(8,"mat-form-field",10)(9,"mat-label"),t._uU(10,"Category Name"),t.qZA(),t._UZ(11,"input",11),t.YNc(12,Z,4,0,"mat-error",12),t.YNc(13,b,4,1,"mat-error",12),t.qZA(),t.TgZ(14,"mat-form-field",10)(15,"mat-label"),t._uU(16,"Short Name"),t.qZA(),t._UZ(17,"input",13),t.YNc(18,_,4,0,"mat-error",12),t.qZA(),t.TgZ(19,"div",14)(20,"button",15),t._uU(21,"update"),t.qZA(),t.TgZ(22,"button",16),t.NdJ("click",function(){t.CHM(e);const g=t.oxw();return t.KtG(g.reset())}),t._uU(23,"reset"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.editCategoryForm),t.xp6(10),t.Q6J("ngIf",(null==e.getCategoryName||null==e.getCategoryName.errors?null:e.getCategoryName.errors.required)&&(null==e.getCategoryName?null:e.getCategoryName.touched)),t.xp6(1),t.Q6J("ngIf",(null==e.getCategoryName||null==e.getCategoryName.errors?null:e.getCategoryName.errors.minlength)&&(null==e.getCategoryName?null:e.getCategoryName.touched)),t.xp6(5),t.Q6J("ngIf",(null==e.getShortName||null==e.getShortName.errors?null:e.getShortName.errors.required)&&(null==e.getShortName?null:e.getShortName.touched)),t.xp6(2),t.Q6J("disabled",e.editCategoryForm.invalid||e.editCategoryForm.pristine)}}class m{constructor(r,e,s,g,I){this.activatedRoute=r,this.categoryService=e,this.storeService=s,this.fb=g,this._snackBar=I,this.error=null,this.loaded=!1}ngOnInit(){this.editCategoryForm=this.fb.group({id:[""],categoryName:["",[n.kI.required,n.kI.minLength(3)]],shortName:["",[n.kI.required]]}),this.getCategoryById()}getCategoryById(){let r=Number(this.activatedRoute.snapshot.paramMap.get("id"));this.categoryService.getCategoryById(r).subscribe({next:e=>{this.savedCategory=e,this.fetchValues(e),this.loaded=!0},error:e=>{console.log(e),this.error=e}})}get getCategoryName(){return this.editCategoryForm.get("categoryName")}get getShortName(){return this.editCategoryForm.get("shortName")}fetchValues(r){this.editCategoryForm.setValue({id:r.id,categoryName:r.categoryName,shortName:r.shortName})}updateCategory(){null!==this.error&&(this.error=null),this.categoryService.updateCategory(this.editCategoryForm.value).subscribe({next:e=>{this._snackBar.open("book category with id: "+e.id+" updated successfully!","",{duration:3e3}),this.storeService.modifyCategory(e),this.savedCategory=e},error:e=>{console.log(e),this.error=e}})}reset(){this.formGroupDirective.resetForm(),this.error=null,this.fetchValues(this.savedCategory)}}m.\u0275fac=function(r){return new(r||m)(t.Y36(c.gz),t.Y36(h.H),t.Y36(N.d),t.Y36(n.qu),t.Y36(f.ux))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-category-edit"]],viewQuery:function(r,e){if(1&r&&t.Gf(v,5),2&r){let s;t.iGM(s=t.CRH())&&(e.formGroupDirective=s.first)}},decls:6,vars:2,consts:[[1,"container","mt-3","p-3","bg-white"],[1,"text-capitalize","fs-4","fw-bold"],["class","container mt-3 alert alert-danger",4,"ngIf"],["class","container mt-3 p-3 bg-white",4,"ngIf"],[1,"container","mt-3","alert","alert-danger"],[1,"d-flex","justify-content-center"],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],["formGroupDirective","ngForm"],["appearance","outline"],["matInput","","formControlName","id","readonly",""],["appearance","outline",1,"mb-4"],["matInput","","formControlName","categoryName"],["class","text-capitalize",4,"ngIf"],["matInput","","formControlName","shortName"],[1,"d-flex","justify-content-between"],["type","submit","mat-raised-button","","color","primary",1,"text-capitalize","fw-semibold",3,"disabled"],["type","button","mat-raised-button","","color","accent",1,"text-capitalize","fw-semibold",3,"click"],[1,"text-capitalize"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"edit book category"),t.qZA(),t._UZ(3,"hr"),t.qZA(),t.YNc(4,x,4,2,"div",2),t.YNc(5,T,24,5,"div",3)),2&r&&(t.xp6(4),t.Q6J("ngIf",e.error),t.xp6(1),t.Q6J("ngIf",e.loaded))},dependencies:[y.O5,u.KE,u.hX,u.TO,p.Nt,C.lW,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]});const E=[{path:"",component:m}];class i{}i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.Bz.forChild(E),c.Bz]});class l{}l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[y.ez,i,u.lN,p.c,C.ot,f.ZX,n.UX]})}}]);