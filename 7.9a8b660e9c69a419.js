"use strict";(self.webpackChunklibrary_management_system=self.webpackChunklibrary_management_system||[]).push([[7],{1938:(T,v,s)=>{s.d(v,{V:()=>d});var l=s(4650),S=s(529);class d{constructor(o){this.http=o,this.ROOT_URL="https://library-management-system-g6oa.onrender.com/api/v1"}saveNewStudent(o){return console.log(o),this.http.post(this.ROOT_URL+"/student",o)}saveStudentImage(o,c){console.log(c);let g=new FormData;return g.append("studentImage",c,c.name),this.http.post(this.ROOT_URL+"/student/"+o+"/uploadimage",g)}getAllStudents(){return console.log("loading students!"),this.http.get(this.ROOT_URL+"/student")}deleteStudent(o){return console.log(o),this.http.delete(this.ROOT_URL+"/student/"+o)}getStudentById(o){return console.log("loading student: "+o),this.http.get(this.ROOT_URL+"/student/"+o)}getIssuedBooksByStudentId(o){return console.log("loading all issued books of student: "+o),this.http.get(this.ROOT_URL+"/student/"+o+"/issuebook")}updateStudent(o){return console.log(o),this.http.put(this.ROOT_URL+"/student/"+o.id,o)}}d.\u0275fac=function(o){return new(o||d)(l.LFG(S.eN))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})},3007:(T,v,s)=>{s.r(v),s.d(v,{StudentListModule:()=>m});var l=s(6895),S=s(4859),d=s(3546),x=s(5412),o=s(9549),c=s(7392),g=s(4144),y=s(7009),L=s(5173),Z=s(9299),O=s(1937),t=s(4650),U=s(1938),A=s(2882),C=s(5501);function b(i,e){if(1&i&&(t.TgZ(0,"div",7)(1,"strong"),t._uU(2,"Error: "),t.qZA(),t._uU(3),t.qZA()),2&i){const n=t.oxw();t.xp6(3),t.AsE("",null==n.error.error?null:n.error.error.error," ",null==n.error.error?null:n.error.error.message,"\n")}}function R(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),t._UZ(4,"img",12)(5,"div",13),t.qZA()(),t.TgZ(6,"div",14)(7,"div",15)(8,"h5",16),t._uU(9),t.qZA(),t.TgZ(10,"p",17)(11,"small",18),t._uU(12),t.qZA()(),t.TgZ(13,"p",17),t._UZ(14,"i",19),t._uU(15),t.qZA(),t.TgZ(16,"p",17),t._UZ(17,"i",20),t._uU(18),t.qZA(),t.TgZ(19,"div",21)(20,"button",22),t.NdJ("click",function(){const a=t.CHM(n).$implicit,f=t.oxw();return t.KtG(f.viewStudent(a))}),t.TgZ(21,"mat-icon"),t._uU(22,"visibility"),t.qZA()(),t.TgZ(23,"button",23),t.NdJ("click",function(){const a=t.CHM(n).$implicit,f=t.oxw();return t.KtG(f.editStudent(a))}),t.TgZ(24,"mat-icon"),t._uU(25,"edit"),t.qZA()(),t.TgZ(26,"button",24),t.NdJ("click",function(){const a=t.CHM(n).$implicit,f=t.oxw();return t.KtG(f.deleteStudent(a))}),t.TgZ(27,"mat-icon"),t._uU(28,"delete"),t.qZA()()()()()()()}if(2&i){const n=e.$implicit;t.xp6(4),t.Q6J("src",n.imageUrl||"assets/images/default-student-image.png",t.LSH),t.xp6(5),t.Oqu(n.name),t.xp6(3),t.Oqu(n.stream),t.xp6(3),t.hij(" ",n.email," "),t.xp6(3),t.hij(" ",n.contact," ")}}class h{constructor(e,n,r,p,a){this.studentService=e,this.storeService=n,this._snackBar=r,this._dialog=p,this.router=a,this.error=null}ngOnInit(){this.storeService.studentsLoaded||this.studentService.getAllStudents().subscribe({next:e=>{this.storeService.loadStudents(e)},error:e=>{console.log(e),this.error=e}}),this.students$=this.storeService.currentStudents$}applyFilter(e){this.searchKey=e.target.value}deleteStudent(e){this._dialog.open(O.F,{data:{type:"student",name:e.name}}).afterClosed().subscribe(n=>{"cancel"===n||void 0===n?console.log("canceling delete operation!"):this.studentService.deleteStudent(e.id).subscribe({next:r=>{this.storeService.removeStudent(e.id),this.storeService.decrementStudent(),this._snackBar.open(e.name+" deleted successfully!","",{duration:3e3})},error:r=>{console.log(r),this.error=r}})})}editStudent(e){this.router.navigate(["student/edit",e.id])}viewStudent(e){this.router.navigate(["student/detail",e.id])}}h.\u0275fac=function(e){return new(e||h)(t.Y36(U.V),t.Y36(A.d),t.Y36(y.ux),t.Y36(x.uw),t.Y36(Z.F0))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-student-list"]],decls:14,vars:8,consts:[[1,"container","mt-3","p-3","bg-white"],[1,"fs-4","fw-bold"],["class","container mt-3 alert alert-danger",4,"ngIf"],[1,"container","mt-3","pt-3","px-3","d-flex","flex-column","bg-white"],["matInput","",3,"keyup"],[1,"container","mt-3","p-3","d-flex","flex-column","align-items-center"],["class","card mb-3 text-center","style","max-width: 540px;",4,"ngFor","ngForOf"],[1,"container","mt-3","alert","alert-danger"],[1,"card","mb-3","text-center",2,"max-width","540px"],[1,"row","g-0"],[1,"col-md-4"],[1,"d-flex","flex-column","justify-content-center","position-relative","w-100","h-100"],["alt","Student Image","onerror","this.src='assets/images/default-student-image.png';",1,"rounded-circle","w-100","position-relative","border","border-5","border-white","shadow","text-white",2,"z-index","1",3,"src"],[1,"position-absolute","top-0","start-0","w-100",2,"background-color","#3f51b5","height","85%"],[1,"col-md-8"],[1,"card-body"],[1,"card-title","text-capitalize","fs-2"],[1,"card-text"],[1,"text-muted"],[1,"fa","fa-envelope"],[1,"fa","fa-phone"],[1,"d-flex","justify-content-evenly"],["mat-fab","",1,"bg-success",3,"click"],["mat-fab","","color","primary",3,"click"],["mat-fab","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"List Of Students"),t.qZA(),t._UZ(3,"hr"),t.qZA(),t.YNc(4,b,4,2,"div",2),t.TgZ(5,"div",3)(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Filter Student"),t.qZA(),t.TgZ(9,"input",4),t.NdJ("keyup",function(p){return n.applyFilter(p)}),t.qZA()()(),t.TgZ(10,"div",5),t.YNc(11,R,29,5,"div",6),t.ALo(12,"filter"),t.ALo(13,"async"),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",n.error),t.xp6(7),t.Q6J("ngForOf",t.Dn7(12,2,t.lcZ(13,6,n.students$),n.searchKey,"name,stream,contact,email")))},dependencies:[l.sg,l.O5,S.cs,c.Hw,o.KE,o.hX,g.Nt,l.Ov,C.g]});const _=[{path:"",component:h}];class u{}u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[Z.Bz.forChild(_),Z.Bz]});class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[l.ez,u,d.QW,S.ot,c.Ps,o.lN,g.c,y.ZX,x.Is,L.i]})}}]);