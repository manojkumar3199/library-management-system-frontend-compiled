"use strict";(self.webpackChunklibrary_management_system=self.webpackChunklibrary_management_system||[]).push([[2],{3002:(H,f,l)=>{l.r(f),l.d(f,{StudentAddModule:()=>s});var h=l(6895),Z=l(9299),d=l(4006),A=l(5439),e=l(4650),T=l(1938),b=l(2882),N=l(7009),i=l(9549),v=l(4144),_=l(4859),C=l(7392),S=l(8425),c=l(1948),p=l(9602);const U=["formGroupDirective"];function q(r,n){if(1&r&&(e.TgZ(0,"div",40)(1,"strong"),e._uU(2,"Error: "),e.qZA(),e._uU(3),e.qZA()),2&r){const t=e.oxw();e.xp6(3),e.AsE("",null==t.error.error?null:t.error.error.error," ",null==t.error.error?null:t.error.error.message,"\n")}}function I(r,n){1&r&&e._uU(0,"Fill Out Your Book Details")}function F(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Stream "),e.TgZ(2,"strong"),e._uU(3,"Required"),e.qZA()())}function Y(r,n){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Stream Should Have "),e.TgZ(2,"strong"),e._uU(3),e.qZA()()),2&r){const t=e.oxw();e.xp6(3),e.hij(" At Least ",null==t.getStudentStream||null==t.getStudentStream.errors||null==t.getStudentStream.errors.minlength?null:t.getStudentStream.errors.minlength.requiredLength," Chars ")}}function D(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Student Name Is "),e.TgZ(2,"strong"),e._uU(3,"Required"),e.qZA()())}function J(r,n){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Student Name Should Have "),e.TgZ(2,"strong"),e._uU(3),e.qZA()()),2&r){const t=e.oxw();e.xp6(3),e.hij(" At Least ",null==t.getStudentName||null==t.getStudentName.errors?null:t.getStudentName.errors.minlength.requiredLength," Chars ")}}function E(r,n){1&r&&(e.TgZ(0,"div",41),e._uU(1," Please "),e.TgZ(2,"Strong"),e._uU(3,"Select"),e.qZA(),e._uU(4," Your Gender "),e.qZA())}function M(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Date Of Birth Is "),e.TgZ(2,"strong"),e._uU(3,"Required"),e.qZA()())}function k(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Contact Number Is "),e.TgZ(2,"strong"),e._uU(3,"Required"),e.qZA()())}function y(r,n){1&r&&(e.TgZ(0,"mat-error")(1,"strong"),e._uU(2,"Invalid"),e.qZA(),e._uU(3," Contact Number "),e.qZA())}function G(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Email Is "),e.TgZ(2,"strong"),e._uU(3,"Required"),e.qZA()())}function Q(r,n){1&r&&(e.TgZ(0,"mat-error")(1,"strong"),e._uU(2,"Invalid"),e.qZA(),e._uU(3," Email "),e.qZA())}class g{constructor(n,t,u,o){this.studentService=n,this.storeService=t,this.fb=u,this._snackBar=o,this.selectedFile=null,this.error=null,this.firstStep=!0,this.secondStep=!0,this.currentSavedStudent=null}ngOnInit(){this.addNewStudentForm=this.fb.group({stream:[null,[d.kI.required,d.kI.minLength(2)]],name:[null,[d.kI.required,d.kI.minLength(3)]],gender:[null,d.kI.required],dob:[null,d.kI.required],contact:[null,[d.kI.required,d.kI.pattern("^[7-9][0-9]{9}$")]],email:[null,[d.kI.required,d.kI.pattern("^[a-z0-9](.?[a-z0-9]){5,}@g(oogle)?mail.com$")]]})}get getStudentStream(){return this.addNewStudentForm.get("stream")}get getStudentName(){return this.addNewStudentForm.get("name")}get getStudentGender(){return this.addNewStudentForm.get("gender")}get getStudentDob(){return this.addNewStudentForm.get("dob")}get getStudentContact(){return this.addNewStudentForm.get("contact")}get getStudentEmail(){return this.addNewStudentForm.get("email")}saveNewStudent(n){null!==this.addNewStudentForm.value.dob&&A(this.addNewStudentForm.value.dob,"DD-MM-YYYY").format("DD-MM-YYYY")!==this.addNewStudentForm.value.dob&&(this.addNewStudentForm.value.dob=A(this.addNewStudentForm.value.dob).format("DD-MM-YYYY")),null!==this.error&&(this.error=null),this.studentService.saveNewStudent(this.addNewStudentForm.value).subscribe({next:u=>{this.storeService.addStudent(u),this.storeService.incrementStudent(),this.currentSavedStudent=u,this._snackBar.open(u.name+" added successfully!","",{duration:3e3}),this.firstStep=!1,n.next()},error:u=>{console.log(u),this.error=u}})}reset(n){n.reset(),this.formGroupDirective.resetForm(),this.error=null}onFileSelect(n){this.selectedFile=n.target.files[0]??null}saveStudentImage(n){null!==this.error&&(this.error=null);let t=this.currentSavedStudent?.id;this.studentService.saveStudentImage(t,this.selectedFile).subscribe({next:o=>{this._snackBar.open("Image Uploaded Successfully!","",{duration:3e3}),this.storeService.addStudentImage(t,o),this.secondStep=!1,n.next()},error:o=>{console.log(o),this.error=o}})}skipImageUploading(n){null!==this.error&&(this.error=null),this.secondStep=!1,n.next()}}g.\u0275fac=function(n){return new(n||g)(e.Y36(T.V),e.Y36(b.d),e.Y36(d.qu),e.Y36(N.ux))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-student-add"]],viewQuery:function(n,t){if(1&n&&e.Gf(U,5),2&n){let u;e.iGM(u=e.CRH())&&(t.formGroupDirective=u.first)}},decls:80,vars:21,consts:[[1,"container","mt-3","p-3","bg-white"],[1,"fs-4","fw-bold"],["class","container mt-3 alert alert-danger",4,"ngIf"],["orientation","vertical",3,"linear"],["stepper",""],[3,"stepControl","editable"],["step",""],[1,"d-flex","justify-content-center","mt-5"],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],["formGroupDirective","ngForm"],["matStepLabel",""],["appearance","outline",1,"mb-4"],["matInput","","placeholder","e.g: Bsc","formControlName","stream"],[4,"ngIf"],["matInput","","placeholder","e.g: Akash Sathi","formControlName","name"],[1,"d-flex","flex-column","align-items-center","mb-5"],["formControlName","gender"],["value","male"],["value","female"],["value","others"],["class","text-danger",4,"ngIf"],["matInput","","formControlName","dob","placeholder","MM/DD/YYYY",3,"matDatepicker"],["matIconSuffix","",3,"for"],["startView","multi-year"],["picker",""],["matPrefix",""],["type","tel","matInput","","placeholder","9857478744","formControlName","contact"],["matSuffix",""],["matInput","","placeholder","e.g: akashsathi@gmail.com","formControlName","email"],[1,"d-flex","justify-content-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-raised-button","","color","accent",3,"click"],["label","Add Student Image",3,"editable"],["mat-raised-button","",3,"click"],["hidden","","type","file",3,"change"],["fileInput",""],[1,"align-self-center","ms-4"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],["label","Done"],[1,"alert","alert-success","mt-5"],[1,"container","mt-3","alert","alert-danger"],[1,"text-danger"]],template:function(n,t){if(1&n){const u=e.EpF();e.TgZ(0,"div",0)(1,"p",1),e._uU(2,"Add New Student"),e.qZA(),e._UZ(3,"hr"),e.qZA(),e.YNc(4,q,4,2,"div",2),e.TgZ(5,"div",0)(6,"mat-stepper",3,4)(8,"mat-step",5,6)(10,"div",7)(11,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(u);const a=e.MAs(7);return e.KtG(t.saveNewStudent(a))}),e.YNc(13,I,1,0,"ng-template",10),e.TgZ(14,"mat-form-field",11)(15,"mat-label"),e._uU(16,"Stream"),e.qZA(),e._UZ(17,"input",12),e.YNc(18,F,4,0,"mat-error",13),e.YNc(19,Y,4,1,"mat-error",13),e.qZA(),e.TgZ(20,"mat-form-field",11)(21,"mat-label"),e._uU(22,"Name"),e.qZA(),e._UZ(23,"input",14),e.YNc(24,D,4,0,"mat-error",13),e.YNc(25,J,4,1,"mat-error",13),e.qZA(),e.TgZ(26,"div",15)(27,"mat-radio-group",16)(28,"mat-radio-button",17),e._uU(29,"Male"),e.qZA(),e.TgZ(30,"mat-radio-button",18),e._uU(31,"Female"),e.qZA(),e.TgZ(32,"mat-radio-button",19),e._uU(33,"Other"),e.qZA()(),e.YNc(34,E,5,0,"div",20),e.qZA(),e.TgZ(35,"mat-form-field",11)(36,"mat-label"),e._uU(37,"Date Of Birth"),e.qZA(),e._UZ(38,"input",21)(39,"mat-datepicker-toggle",22)(40,"mat-datepicker",23,24),e.YNc(42,M,4,0,"mat-error",13),e.qZA(),e.TgZ(43,"mat-form-field",11)(44,"mat-label"),e._uU(45,"Contact Number"),e.qZA(),e.TgZ(46,"span",25),e._uU(47,"+91 \xa0"),e.qZA(),e._UZ(48,"input",26),e.TgZ(49,"mat-icon",27),e._uU(50,"call"),e.qZA(),e.YNc(51,k,4,0,"mat-error",13),e.YNc(52,y,4,0,"mat-error",13),e.qZA(),e.TgZ(53,"mat-form-field",11)(54,"mat-label"),e._uU(55,"Email"),e.qZA(),e._UZ(56,"input",28),e.YNc(57,G,4,0,"mat-error",13),e.YNc(58,Q,4,0,"mat-error",13),e.qZA(),e.TgZ(59,"div",29)(60,"button",30),e._uU(61,"Save"),e.qZA(),e.TgZ(62,"button",31),e.NdJ("click",function(){e.CHM(u);const a=e.MAs(7);return e.KtG(t.reset(a))}),e._uU(63,"Reset"),e.qZA()()()()(),e.TgZ(64,"mat-step",32)(65,"div",7)(66,"button",33),e.NdJ("click",function(){e.CHM(u);const a=e.MAs(69);return e.KtG(a.click())}),e._uU(67,"Choose File"),e.qZA(),e.TgZ(68,"input",34,35),e.NdJ("change",function(a){return t.onFileSelect(a)}),e.qZA(),e.TgZ(70,"span",36),e._uU(71),e.qZA()(),e.TgZ(72,"div",29)(73,"button",37),e.NdJ("click",function(){e.CHM(u);const a=e.MAs(7);return e.KtG(t.saveStudentImage(a))}),e._uU(74,"Upload"),e.qZA(),e.TgZ(75,"button",31),e.NdJ("click",function(){e.CHM(u);const a=e.MAs(7);return e.KtG(t.skipImageUploading(a))}),e._uU(76,"Skip"),e.qZA()()(),e.TgZ(77,"mat-step",38)(78,"div",39),e._uU(79," Student Added Successfully! "),e.qZA()()()()}if(2&n){const u=e.MAs(9),o=e.MAs(41);e.xp6(4),e.Q6J("ngIf",t.error),e.xp6(2),e.Q6J("linear",!0),e.xp6(2),e.Q6J("stepControl",t.addNewStudentForm)("editable",t.firstStep),e.xp6(3),e.Q6J("formGroup",t.addNewStudentForm),e.xp6(7),e.Q6J("ngIf",(null==t.getStudentStream||null==t.getStudentStream.errors?null:t.getStudentStream.errors.required)&&(null==t.getStudentStream?null:t.getStudentStream.touched)||u.interacted&&(null==t.getStudentStream?null:t.getStudentStream.untouched)&&(null==t.getStudentStream||null==t.getStudentStream.errors?null:t.getStudentStream.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==t.getStudentStream||null==t.getStudentStream.errors?null:t.getStudentStream.errors.minlength)&&(null==t.getStudentStream?null:t.getStudentStream.touched)||u.interacted&&(null==t.getStudentStream?null:t.getStudentStream.untouched)&&(null==t.getStudentStream||null==t.getStudentStream.errors?null:t.getStudentStream.errors.minlength)),e.xp6(5),e.Q6J("ngIf",(null==t.getStudentName||null==t.getStudentName.errors?null:t.getStudentName.errors.required)&&(null==t.getStudentName?null:t.getStudentName.touched)||u.interacted&&(null==t.getStudentName?null:t.getStudentName.untouched)&&(null==t.getStudentName||null==t.getStudentName.errors?null:t.getStudentName.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==t.getStudentName||null==t.getStudentName.errors?null:t.getStudentName.errors.minlength)&&(null==t.getStudentName?null:t.getStudentName.touched)||u.interacted&&(null==t.getStudentName?null:t.getStudentName.untouched)&&(null==t.getStudentName||null==t.getStudentName.errors?null:t.getStudentName.errors.minlength)),e.xp6(9),e.Q6J("ngIf",(null==t.getStudentGender?null:t.getStudentGender.invalid)&&(null==t.getStudentGender?null:t.getStudentGender.touched)||u.interacted&&(null==t.getStudentGender?null:t.getStudentGender.invalid)&&(null==t.getStudentGender?null:t.getStudentGender.untouched)),e.xp6(4),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(3),e.Q6J("ngIf",(null==t.getStudentDob||null==t.getStudentDob.errors?null:t.getStudentDob.errors.required)&&(null==t.getStudentDob?null:t.getStudentDob.touched)||u.interacted&&(null==t.getStudentDob?null:t.getStudentDob.untouched)&&(null==t.getStudentDob||null==t.getStudentDob.errors?null:t.getStudentDob.errors.required)),e.xp6(9),e.Q6J("ngIf",(null==t.getStudentContact||null==t.getStudentContact.errors?null:t.getStudentContact.errors.required)&&(null==t.getStudentContact?null:t.getStudentContact.touched)||u.interacted&&(null==t.getStudentContact?null:t.getStudentContact.untouched)&&(null==t.getStudentContact||null==t.getStudentContact.errors?null:t.getStudentContact.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==t.getStudentContact||null==t.getStudentContact.errors?null:t.getStudentContact.errors.pattern)&&(null==t.getStudentContact?null:t.getStudentContact.touched)||u.interacted&&(null==t.getStudentContact?null:t.getStudentContact.untouched)&&(null==t.getStudentContact||null==t.getStudentContact.errors?null:t.getStudentContact.errors.pattern)),e.xp6(5),e.Q6J("ngIf",(null==t.getStudentEmail||null==t.getStudentEmail.errors?null:t.getStudentEmail.errors.required)&&(null==t.getStudentEmail?null:t.getStudentEmail.touched)||u.interacted&&(null==t.getStudentEmail?null:t.getStudentEmail.untouched)&&(null==t.getStudentEmail||null==t.getStudentEmail.errors?null:t.getStudentEmail.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==t.getStudentEmail||null==t.getStudentEmail.errors?null:t.getStudentEmail.errors.pattern)&&(null==t.getStudentEmail?null:t.getStudentEmail.touched)||u.interacted&&(null==t.getStudentEmail?null:t.getStudentEmail.untouched)&&(null==t.getStudentEmail||null==t.getStudentEmail.errors?null:t.getStudentEmail.errors.pattern)),e.xp6(2),e.Q6J("disabled",t.addNewStudentForm.invalid),e.xp6(4),e.Q6J("editable",t.secondStep),e.xp6(7),e.Oqu(null==t.selectedFile?null:t.selectedFile.name),e.xp6(2),e.Q6J("disabled",!t.selectedFile||!t.currentSavedStudent)}},dependencies:[h.O5,i.KE,i.hX,i.TO,i.qo,i.R9,v.Nt,_.lW,C.Hw,S.C0,S.VY,S.Vq,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,c.VQ,c.U0,p.Mq,p.hl,p.nW]});const w=[{path:"",component:g}];class m{}m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[Z.Bz.forChild(w),Z.Bz]});var B=l(4385),R=l(3238);class s{}s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.ez,m,i.lN,v.c,_.ot,C.Ps,S.T5,B.LD,d.UX,N.ZX,c.Fk,p.FA,R.XK]})}}]);