"use strict";(self.webpackChunklibrary_management_system=self.webpackChunklibrary_management_system||[]).push([[54],{2054:(S,k,r)=>{r.r(k),r.d(k,{BookListModule:()=>d});var g=r(6895),v=r(4859),n=r(3546),h=r(5412),p=r(9549),x=r(7392),Z=r(4144),b=r(7009),B=r(5173),f=r(9299),C=r(1937),t=r(4650),y=r(608),A=r(2882),T=r(5501);function L(i,o){if(1&i&&(t.TgZ(0,"div",8)(1,"strong"),t._uU(2,"Error: "),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.AsE("",null==e.error.error?null:e.error.error.error," ",null==e.error.error?null:e.error.error.message,"\n")}}function U(i,o){1&i&&(t.TgZ(0,"p",16)(1,"span",17),t._uU(2,"Reserved"),t.qZA()())}function F(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",9)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title-group")(4,"mat-card-title")(5,"p",10),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-subtitle")(8,"p"),t._uU(9),t.qZA()(),t.YNc(10,U,3,0,"p",11),t.qZA()(),t.TgZ(11,"img",12),t.NdJ("error",function(l){t.CHM(e);const a=t.oxw();return t.KtG(a.setDefaultImage(l))}),t.qZA(),t.TgZ(12,"mat-card-content")(13,"p")(14,"strong"),t._uU(15,"Author: "),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.qZA()(),t.TgZ(19,"mat-card-actions")(20,"button",13),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.viewBook(a))}),t._uU(21,"View"),t.qZA(),t.TgZ(22,"button",14),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.editBook(a))}),t._uU(23,"Edit"),t.qZA(),t.TgZ(24,"button",15),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.deleteBook(a))}),t._uU(25,"Delete"),t.qZA()()()()}if(2&i){const e=o.$implicit;t.xp6(6),t.Oqu(e.title),t.xp6(3),t.Oqu(e.category.categoryName),t.xp6(1),t.Q6J("ngIf",e.reserved),t.xp6(1),t.Q6J("src",e.imageUrl||"assets/images/default-book-image.jpg",t.LSH),t.xp6(5),t.Oqu(e.author),t.xp6(2),t.Oqu(e.description)}}class m{constructor(o,e,s,l,a){this.bookService=o,this.storeService=e,this._snackBar=s,this._dialog=l,this.router=a,this.error=null}ngOnInit(){this.storeService.booksLoaded||this.bookService.getAllBooks().subscribe({next:o=>{this.storeService.loadBooks(o)},error:o=>{console.log(o),this.error=o}}),this.books$=this.storeService.currentBooks$}applyFilter(o){this.searchKey=o.target.value}deleteBook(o){this._dialog.open(C.F,{data:{type:"book",name:o.title}}).afterClosed().subscribe(e=>{"cancel"===e||void 0===e?console.log("canceling delete operation!"):this.bookService.deleteBook(o.id).subscribe({next:s=>{this.storeService.removeBook(o.id),this.storeService.decrementBook(),this._snackBar.open(o.title+" deleted successfully!","",{duration:3e3})},error:s=>{console.log(s),this.error=s}})})}editBook(o){this.router.navigate(["book/edit",o.id])}viewBook(o){this.router.navigate(["book/detail",o.id])}setDefaultImage(o){o.target.src&&(o.target.src="assets/images/default-book-image.jpg")}}m.\u0275fac=function(o){return new(o||m)(t.Y36(y.Z),t.Y36(A.d),t.Y36(b.ux),t.Y36(h.uw),t.Y36(f.F0))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-book-list"]],decls:15,vars:8,consts:[[1,"container","mt-3","p-3","bg-white"],[1,"text-capitalize","fs-4","fw-bold"],["class","container mt-3 alert alert-danger",4,"ngIf"],[1,"container","mt-3","pt-3","px-3","d-flex","flex-column","bg-white"],["matInput","",3,"keyup"],[1,"container","mt-3","p-3"],[1,"row","gy-5","row-cols-md-2","row-cols-lg-3"],["class","col",4,"ngFor","ngForOf"],[1,"container","mt-3","alert","alert-danger"],[1,"col"],[1,"fs-4","fw-bold"],["mat-card-sm-image","",4,"ngIf"],["mat-card-image","","alt","Default Book Image",2,"max-width","400px",3,"src","error"],["mat-raised-button","",1,"fw-semibold","me-2",3,"click"],["mat-raised-button","","color","primary",1,"fw-semibold","me-2",3,"click"],["mat-raised-button","","color","warn",1,"fw-semibold",3,"click"],["mat-card-sm-image",""],[1,"badge","text-bg-warning"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"list of books"),t.qZA(),t._UZ(3,"hr"),t.qZA(),t.YNc(4,L,4,2,"div",2),t.TgZ(5,"div",3)(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Filter book"),t.qZA(),t.TgZ(9,"input",4),t.NdJ("keyup",function(l){return e.applyFilter(l)}),t.qZA()()(),t.TgZ(10,"div",5)(11,"div",6),t.YNc(12,F,26,6,"div",7),t.ALo(13,"filter"),t.ALo(14,"async"),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("ngIf",e.error),t.xp6(8),t.Q6J("ngForOf",t.Dn7(13,2,t.lcZ(14,6,e.books$),e.searchKey,"title,author,description,categoryName")))},dependencies:[g.sg,g.O5,n.a8,n.hq,n.dn,n.dk,n.G2,n.vP,n.$j,n.n5,n.C1,v.lW,p.KE,p.hX,Z.Nt,g.Ov,T.g]});const N=[{path:"",component:m}];class c{}c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[f.Bz.forChild(N),f.Bz]});class d{}d.\u0275fac=function(o){return new(o||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[g.ez,c,n.QW,v.ot,x.Ps,p.lN,Z.c,b.ZX,h.Is,B.i]})}}]);